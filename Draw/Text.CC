/* Draw single color char. */
U0 DrawChar(CTex2D *tex, I64 x, I64 y, U8 char, CBGR24 color, 
	U64 *font = text.font)
{
	// Check if off-screen
	if (x >= tex->w || x <= -FONT_WIDTH)
		return;

	I64 i, j;
	for (j = 0; j < FONT_HEIGHT; j++)
	{
		for (i = 0; i < FONT_WIDTH; i++)
		{
			if (font[char].u8[j] & (1 << i))
				tex->rawBuf[x + i + (y + j) * tex->w] = color;
		}
	}
}

/* Draw single color string. */
U0 DrawString(CTex2D *tex, I64 x, I64 y, U8 *str, CBGR24 color,
	U64 *font = text.font)
{
	I64 cur = 0;	// String cursor
	I64 xCur = x;	// Screen cursors 
	I64 yCur = y;
	U8 char = 0;	// Character to draw

	while (str[cur] != NULL)
	{
		switch (str[cur])
		{
			// Escape sequence
			case '\\':
				"ESCAPE SEQ\n";
				switch (str[cur + 1])
				{
					case 'n':
						xCur = x;
						yCur += FONT_HEIGHT;
						"NEWLINE\n";
						break;

					// Not a real tab, but what mong uses tabs in labels?
					case 't':
						xCur += FONT_WIDTH * 4;
						break;
					
					case '\\':
						DrawChar(tex, xCur, yCur, '\\', color, font);
						xCur += FONT_WIDTH;
						break;
						
				}
				cur += 2;
				break;

			case ' ':
				cur++;
				xCur += FONT_WIDTH;
				break;

			default:
				DrawChar(tex, xCur, yCur, str[cur], color, font);
				cur++;
				xCur += FONT_WIDTH;
				break;
		}
	}
}